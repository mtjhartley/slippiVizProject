<!--The content below is only a placeholder and can be replaced.-->
<div class='container'>
  <div style="text-align:center">
    <h1>
      Welcome to {{title}}!!
    </h1>
    <div id="player" style='width: 1080px; height: 720px;'></div>
    
    <form (submit)="getSetData()">
      <div class='form-group' style='float:middle'>
        <select [(ngModel)]='setIndex' name='selectedSet' class='form-control' style='width: 50%'>
          <!-- <option value='default'>  Select a Set!</option> -->
          <option *ngFor='let set of allSets; let i = index;' [value]='i'>{{set.name}}</option>
          
        </select>
        <!-- <input type="text" name="setId" [(ngModel)]="setId" value="7650196"> -->

        <!-- <input type='submit' value='Get the set data!'> -->
        <button class='btn btn-default' type='submit'>Get the Set Data!</button>
      </div>
    </form>
  </div>






  <div *ngIf='isDataAvailable'>
    <div class='row'>
      <!-- <div class='col-md-4 col-lg-6'>
        <canvas baseChart
          [data]="doughnutChartData"
          [labels]='doughnutChartLabels'
          [chartType]='doughtnutChartType'
          (chartHover)="chartHovered($event)"
          (chartClick)="chartClicked($event)"></canvas>
      </div> -->

      <div class='col-md-6 col-lg-12'>
        <canvas baseChart
                [datasets]="barChartData"
                [labels]="barChartLabels"
                [options]="barChartOptions"
                [legend]="barChartLegend"
                [chartType]="barChartType"
                (chartHover)="chartHovered($event)"
                (chartClick)="chartClicked($event)"></canvas>
      </div>

      <div class='col-md-6 col-lg-12'>
        <h4>Win Probability</h4>
        <canvas baseChart
          [datasets]="lineChartData"
          [labels]="lineChartLabels"
          [options]="lineChartOptions"
          [colors]="lineChartColors"
          [legend]="lineChartLegend"
          [chartType]="lineChartType"></canvas>
      </div>
        <!--Make this an NG for for all of the games in the gameIds array!  -->
        <h4 *ngFor='let id of gameIds; let idx = index;' (click)='updateLineChartData(gameIds[idx])' style='display:inline-block'>Game {{idx + 1}}</h4>
        <!-- <h4 (click)="updateLineChartData(gameIds[0])">Game 1 {{gameIds[0]}}</h4>
        <h4 (click)="updateLineChartData(gameIds[1])">Game 2 {{gameIds[1]}}</h4>
        <h4 (click)="updateLineChartData(gameIds[2])">Game 3 {{gameIds[2]}}</h4> -->
    </div>

  </div>
<div *ngIf='isDataAvailable'>
  <div class='row'>
    <div class='table-responsive' class='col-md-6'>
      <table class='table table-bordered'>
        <thead>
          <tr>
            <th colspan='2'>{{p1Tag}} Stats</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Openings Needed to Kill</td>
            <td> {{ p1Punishes.length / p1Kills | number:'1.1-4'}} </td>
          </tr>
          <tr>
            <td>Total Neutral Wins</td>
            <td>{{ p1Punishes.length}}</td>
          </tr>
          <tr>
            <td>Damage Dealt</td>
            <td>{{ p1Damage | number:'1.1-2'}}</td>
          </tr>
          <tr>
            <td>Total Hits</td>
            <td>{{ p1Hits }}</td>
          </tr>
          <tr>
            <td>Average Hits Per Combo</td>
            <td>{{ p1Hits / p1Punishes.length | number:'1.1-2'}}</td>
          </tr>
          <tr>
            <td>Average Punish Length (Seconds)</td>
            <td>{{ p1Frames / p1Punishes.length / 60 | number:'1.1-2'}}</td>
          </tr>
          <tr>
            <td>Highest Damage Punish</td>
            <td><a style='color:blue; text-decoration: underline;' (click)="seekToTime(p1MaxPunish.frameStart, p1MaxPunish.gameId)">{{ p1MaxPunish.damage | number: '1.2-2'}}</a></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class='table-responsive' class='col-md-6'>
      <table class='table table-bordered'>
        <thead>
          <tr>
            <th colspan='2'>{{p2Tag}} Stats</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Openings Needed to Kill</td>
            <td> {{ p2Punishes.length / p1Kills | number:'1.1-4'}} </td>
          </tr>
          <tr>
            <td>Total Neutral Wins</td>
            <td>{{ p2Punishes.length}}</td>
          </tr>
          <tr>
            <td>Damage Dealt</td>
            <td>{{ p2Damage | number:'1.1-2'}}</td>
          </tr>
          <tr>
            <td>Total Hits</td>
            <td>{{ p2Hits }}</td>
          </tr>
          <tr>
            <td>Average Hits Per Combo</td>
            <td>{{ p2Hits / p2Punishes.length | number:'1.1-2'}}</td>
          </tr>
          <tr>
            <td>Average Punish Length (Seconds)</td>
            <td>{{ p2Frames / p2Punishes.length / 60 | number:'1.1-2'}}</td>
          </tr>
          <tr>
            <td>Highest Damage Punish</td>
            <td><a style='color:blue; text-decoration: underline;' (click)="seekToTime(p2MaxPunish.frameStart, p2MaxPunish.gameId)">{{ p2MaxPunish.damage | number: '1.2-2'}}</a></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>



  <div class='row'>
    <h3>Combo Data with Timestamps</h3>
    <div class='col-md-6'>
      <h3 style='text-align:center;'>{{p1Tag}}</h3>
      <table class='table table-hover'>
        <tr>
          <th>Game</th>
          <th>Damage</th>
          <th>Hits</th>
          <th>Killing Blow?</th>
          <th>Time (Frames)</th>
          <th>Combo Begin</th>
          <th>Combo End</th>
        </tr>

        <tr *ngFor='let punish of p1Punishes'>
          <td>{{gameIds.indexOf(punish.gameId) + 1}} </td>
          <td>{{punish.damage | number: '1.2-2'}}</td>
          <td>{{punish.hits}}</td>
          <td>{{punish.isKill}}</td>
          <td>{{punish.time}}</td>
          <td><a style='color:blue; text-decoration: underline;' (click)="seekToTime(punish.frameStart, punish.gameId)">{{punish.frameStart}}</a></td>
          <td>{{punish.frameEnd}}</td>
        </tr>
      </table>
    </div>

    <div class='col-md-6'>
      <h3>{{p2Tag}}</h3>
      <table class='table table-hover'>
        <tr>
          <th>Game</th>
          <th>Damage Dealt</th>
          <th>Hits</th>
          <th>Killing Blow?</th>
          <th>Time (Frames)</th>
          <th>Combo Begin</th>
          <th>Combo End</th>
        </tr>

        <tr *ngFor='let punish of p2Punishes' >
          <td>{{gameIds.indexOf(punish.gameId) + 1}}</td>
          <td>{{punish.damage | number: '1.2-2'}}</td>
          <td>{{punish.hits}}</td>
          <td *ngIf='punish.isKill'>KILLED!!</td>
          <td *ngIf='!punish.isKill'>DIDNT KILL!!</td>
          <td>{{punish.time}}</td>
          <td><a style='color:blue; text-decoration: underline;' (click)="seekToTime(punish.frameStart, punish.gameId)">{{punish.frameStart}}</a></td>
          <td>{{punish.frameEnd}}</td>
        </tr>
      </table>
    </div>
  </div>



